---
title: "Testing new datasets"
output: html_document
date: "2024-01-23"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

First update `pastclim` to the latest commit in branch `chelsa`. Close RStudio and restart it
before trying this out.

## A quick check for the new datasets

We now have a lot of new dataset. Let's try a couple of variables to check that they all work

```{r}
list_available_datasets()
```

## CHELSA present

Start with a virtual dataset:

```{r}
bio_vars <- c("bio12","temperature_01")
dataset = "CHELSA_2.1_0.5m_vsi"
download_dataset(dataset=dataset, bio_variables = bio_vars)
```
Now use it:
```{r}
test_rast<-region_series(bio_variables = bio_vars, dataset = dataset)
test_rast$bio12
test_rast$temperature_01
```

NOTE: bio12 is precipitation (it should go into the several thousands), whilst
temperature_01 is the Jan temp (so range, from -50 to 40 or something along those lines
depending on which dataset you are looking at). Ideally, the units should be informative.

Now the real dataset (downloading the files)
```{r}
bio_vars <- c("bio12","temperature_01")
dataset = "CHELSA_2.1_0.5m"
download_dataset(dataset=dataset, bio_variables = bio_vars)
test_rast<-region_series(bio_variables = bio_vars, dataset = dataset)
test_rast$bio12
test_rast$temperature_01

```

##CHELSA future

Again, a virtual dataset first
```{r}
bio_vars <- c("bio12","temperature_01")
dataset = "CHELSA_2.1_MPI-ESM1-2-HR_ssp370_0.5m_vsi"
download_dataset(dataset=dataset, bio_variables = bio_vars)
test_rast<-region_series(bio_variables = bio_vars, dataset = dataset)
test_rast$bio12
test_rast$temperature_01

```

And now the downloading data:
```{r}
bio_vars <- c("bio12","temperature_01")
dataset = "CHELSA_2.1_GFDL-ESM4_ssp126_0.5m"
download_dataset(dataset=dataset, bio_variables = bio_vars)
test_rast<-region_series(bio_variables = bio_vars, dataset = dataset)
test_rast$bio12
test_rast$temperature_01

```

## Paleoclim
```{r}
bio_vars <- c("bio12","bio12")
dataset = "paleoclim_1.0_10m"
download_dataset(dataset=dataset, bio_variables = bio_vars)
test_rast<-region_series(bio_variables = bio_vars, dataset = dataset)
test_rast$bio12
test_rast$bio12

```


## WorldClim
```{r}
bio_vars <- c("bio01","bio12")
dataset = "WorldClim_2.1_10m"
download_dataset(dataset=dataset, bio_variables = bio_vars)
test_rast<-region_series(bio_variables = bio_vars, dataset = dataset)
test_rast$bio01
test_rast$bio12

```

```{r}
bio_vars <- c("temperature_min_03")
dataset = "WorldClim_2.1_10m"
download_dataset(dataset=dataset, bio_variables = bio_vars)
test_rast<-region_series(bio_variables = bio_vars, dataset = dataset)
test_rast$altitude
```

```{r}
bio_vars <- c("altitude")
dataset = "WorldClim_2.1_10m"
download_dataset(dataset=dataset, bio_variables = bio_vars)
test_rast<-region_series(bio_variables = bio_vars, dataset = dataset)
test_rast$temperature_min_03
```


Future projections
```{r}
bio_vars <- c("bio01","bio12")
dataset = "WorldClim_2.1_MPI-ESM1-2-HR_ssp370_10m"
download_dataset(dataset=dataset, bio_variables = bio_vars)
test_rast<-region_series(bio_variables = bio_vars, dataset = dataset)
test_rast$bio01
test_rast$bio12

```

